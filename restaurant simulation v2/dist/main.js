(()=>{"use strict";class e{#e;#t;#r;#s;#i;constructor({orderNum:e,orderName:t,cookTime:r}){this.#r=e,this.#s=r,this.#i=t,this.#t="대기"}getElement=()=>this.#e;setElement=e=>this.#e=e;replaceElement=()=>{this.#e.innerText=`주문${this.#r}    ${this.#i}    ${this.#t}`};getStatus=()=>this.#t;setStatus=e=>this.#t=e;getOrderNum=()=>this.#r;setOrderNum=e=>this.#r=e;getCookTime=()=>this.#s;makeOrder=e=>{let t=document.createElement("li");t.innerText=this.toString(),e.appendChild(t),this.#e=t};finishOrder=({server:e,$orderList:t,$resultList:r})=>{t.removeChild(this.#e),e.finishServing();let s=document.createElement("li");s.innerText=this.toString(),r.appendChild(s)};toString=()=>`주문${this.#r}    ${this.#i}    ${this.#t}`}let t=function(){let t=1;return({name:r,value:s},i)=>{let n=new e({orderNum:t,orderName:r,cookTime:s});return n.makeOrder(i),t+=1,n}}();class r{#e;#r;#t;constructor({element:e}){this.#t="대기중",this.#e=e}getStatus=()=>this.#t;setStatus=e=>this.#t=e;replaceElement=()=>{this.#e.innerText=`${this.#t}    ${""!==this.#r?"주문"+this.#r:this.#r}`};onCook=e=>{this.#t="요리중",this.#r=e.getOrderNum(),this.replaceElement(),e.setStatus("요리중"),e.replaceElement()};getFood=()=>{this.#r="",this.#t="대기중",this.replaceElement()}}class s{#e;#r;#t;#n;constructor({servingTime:e,element:t}){this.#t="대기중",this.#n=e,this.#e=t}getServingTime=()=>this.#n;getStatus=()=>this.#t;setStatus=e=>this.#t=e;replaceElement=()=>{this.#e.innerText=`${this.#t}    ${""!==this.#r?"주문"+this.#r:this.#r}`};onServing=e=>{this.#t="서빙",this.#r=e.getOrderNum(),this.replaceElement(),e.setStatus("서빙"),e.replaceElement()};finishServing=()=>{this.#t="대기중",this.#r="",this.replaceElement()}}let i=[],n=document.querySelector(".orderList"),o=document.querySelector(".resultList"),m={sundae:{name:"순댓국",value:1e3},heajang:{name:"해장국",value:2e3}},u=[];document.getElementsByName("cookList").forEach((e=>{u.push(new r({element:e}))}));let a=[],l=document.getElementsByName("serverList"),h=1e3;function d({cooker:e,order:t}){return new Promise(((r,s)=>{let i,n=setInterval((()=>{i=a.find((e=>"대기중"===e.getStatus())),void 0!==i&&(clearInterval(n),e.getFood(t.getOrderNum()),i.onServing(t),setTimeout((()=>{r({server:i,order:t})}),i.getServingTime()))}),100)}))}l.forEach((e=>{a.push(new s({servingTime:h,element:e})),h+=1e3})),document.querySelector(".orderBtn").onclick=e=>{if(e.target instanceof HTMLButtonElement==0)return;let r=m[e.target.name];i.push(t(r,n)),new Promise(((e,t)=>{let r,s=setInterval((()=>{if(r=u.find((e=>"대기중"===e.getStatus())),void 0!==r){clearInterval(s);let t=i.shift();r.onCook(t),setTimeout((()=>{e({cooker:r,order:t})}),t.getCookTime())}}),100)})).then(d).then((({server:e,order:t})=>{t.finishOrder({server:e,$orderList:n,$resultList:o})}))}})();